name: ğŸ§® Generate GitHub Profile Metrics

# This workflow generates comprehensive GitHub metrics
# Note: The generated metrics.svg is currently not displayed in README.md
# You can optionally add it to your README if desired

permissions:
  contents: write

on:
  schedule:
    - cron: "0 0 * * *"     # Run daily at midnight UTC
  workflow_dispatch:        # Allow manual triggering

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4
      
      - name: ğŸ§© Generate Metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          user: ShriabhayS
          template: classic
          base: header, activity, community, repositories, metadata
          config_timezone: Australia/Melbourne
          filename: github-metrics.svg

          # Plugins configuration
          plugin_isocalendar: yes
          plugin_isocalendar_duration: half-year
          plugin_languages: yes
          plugin_languages_limit: 8
          plugin_achievements: yes
          plugin_achievements_display: compact
          plugin_followup: yes
          plugin_habits: yes
          plugin_habits_days: 14
          plugin_habits_facts: no
          plugin_habits_from: 200
          plugin_notable: yes
          plugin_notable_repositories: 5
          plugin_lines: yes
          plugin_commits: yes
          plugin_commits_authoring: yes
      
      - name: ğŸ“ Commit metrics
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add github-metrics.svg
          git commit -m "Update GitHub metrics [skip ci]" || exit 0
          git push
